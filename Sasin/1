#include <iostream>
#include <cassert>
#include <string>
#include <ctime>

using namespace std;

template<typename dataType>
class queueList
{
private:
	struct node
	{
		dataType data;
		string user;
		node *right;
		node *left;
		node(dataType newData, string newStr, node* curTail)
		{
			data = newData;
			user = newStr;
			right = nullptr;
			left = curTail;
		}
	};

	unsigned size;
	node *head;
	node *tail;

public:
	queueList();
	queueList(dataType *mas, string *masStr, unsigned sizeMas);
	//~queueList();
	bool pushBack(dataType var,string Str);
	bool pushFront(dataType var,string Str);
	bool popFront(dataType &var,string &Str);
	bool Back(dataType &var, string &Str) const;
	bool Front(dataType &var, string &Str) const;
	bool printQueue()const;
	bool printRevers()const;
	bool queue(queueList &from);
	bool pushPrior(dataType var, string Str);

};

template<typename dataType>
queueList<dataType>::queueList()
{
	size = 0;
	head = nullptr;
	tail = nullptr;
}
/*template<typename dataType>
queueList<dataType>::~queueList()
{
	dataType i;
	string ss;
	while (popFront(i,ss));
}*/
template<typename dataType>
queueList<dataType>::queueList(dataType *mas, string *masStr, unsigned sizeMas)
{
	for (unsigned i = 0; i < sizeMas; i++)
	{
		pushBack(mas[i], masStr[i]);
	}
}
/*template<typename dataType>
bool queueList<dataType>::pushBack(dataType var, string Str)
{
	node * temp = new node(var, Str, tail);
	if (head == nullptr)
	{
		head = tail = temp;
		size++;
	}
	else
	{
		temp->left = tail;
		tail->right = temp;
		tail = temp;
		size++;
	}

	return true;
}
template<typename dataType>
bool queueList<dataType>::pushFront(dataType var)
{
	node * temp = new node(var, head);
	if (head == nullptr)
	{
		head = tail = temp;
		size++;
	}
	else
	{
		temp->left = nullptr;
		temp->right = head;
		head->left = temp;
		head = temp;
		size++;
	}

	return true;
}
template<typename dataType>
bool queueList<dataType>::pushPrior(dataType var)
{
	node * temp = new node(var, tail);
	node * boardL = tail;
	node * boardR;
	for (size_t i = 0; i < 3; i++)
	{
		boardL = boardL->left;
	}
	boardR = boardL->right;
	

	if (head == nullptr)
	{
		head = tail = temp;
		size++;
	}
	else
	{
		
		temp->right = boardL->right;
		temp->left = boardL;
		boardL->right = temp;
		boardR->left = temp;
		size++;
	}

	return true;
}
template<typename dataType>
bool queueList<dataType>::popFront(dataType &var)
{
	if (head != nullptr)
	{
		var = head->data;
		node * temp = head;
		if (head == tail)
		{
			head = tail = nullptr;
			size--;
		}
		else
		{
			head = head->right;
			head->left = nullptr;
			size--;
		}
		delete temp;
		return true;
	}
	else
	{
		return false;
	}
}
template<typename dataType>
bool queueList<dataType>::Back(dataType &var) const
{
	if (tail != nullptr)
	{
		var = tail->data;
		return true;
	}
	else
	{
		return false;
	}
}
template<typename dataType>
bool queueList<dataType>::Front(dataType &var) const
{
	if (head != nullptr)
	{
		var = head->data;
		return true;
	}
	else
	{
		return false;
	}
}
template<typename dataType>*/
/*bool queueList<dataType>::printQueue()const
{
	node * temp = head;
	while (temp)
	{
		cout << temp->data << " " temp->user;
		temp = temp->right;
	}
	//cout << endl << "end queue" << endl;
	return true;
}
template<typename dataType>
bool queueList<dataType>::printRevers()const
{
	node * temp = tail;
	while (temp)
	{
		cout << temp->data << " ";
		temp = temp->left;
	}
	//cout << endl << "end queue" << endl;
	return true;
}
*/
template<typename dataType>
bool queueList<dataType>::queue(queueList &from)
{
	dataType prior = 100500;
	dataType varPop = 0;
	unsigned int RandTem = 0;
	unsigned int RanDPrior = 0;
	dataType RandNumBack = 0;
	dataType RandNumFront = 0;
	printQueue();
	cout << endl;
	while (true)
	{
		RandTem = rand() % 4;
		RandNumBack = rand() % 10;
		RandNumFront = rand() % 10;
		RanDPrior = rand() % 15;
		if (RandTem == 0)
		{
			cout << "Fell out: " << RandTem << " ." << endl;
			cout << endl;
			popFront(varPop);
			cout << "Queue: ";
			printQueue();
			cout << endl;
			cout << "Magazine: ";
			from.pushBack(varPop);
			from.printQueue();
			cout << endl;
		}
		else if (RandTem == 1)
		{
			cout << "Fell out: " << RandTem << " : " << RandNumBack << "." << endl;
			cout << endl;
			pushBack(RandNumBack);
			popFront(varPop);
			cout << "Queue: ";
			printQueue();
			cout << endl;
			cout << "Magazine: ";
			from.pushBack(varPop);
			from.printQueue();
			cout << endl;
		}
		else if (RandTem == 2)
		{
			cout << "Fell out: " << RandTem << " : " << RandNumFront << ": " << RandNumBack << "." << endl;
			cout << endl;
			popFront(varPop);
			pushBack(RandNumBack);
			pushFront(RandNumFront);
			cout << "Queue: ";
			printQueue();
			cout << endl;
			cout << "Magazine: ";
			from.pushBack(varPop);
			from.printQueue();
			cout << endl;
		}
		else if (RandTem == 3)
		{
			cout << "Fell out: " << RandTem << " : "<< prior << endl;
			cout << endl;
			popFront(varPop);
			pushPrior(prior);
			cout << "Queue: ";
			printQueue();
			cout << endl;
			cout << "Magazine: ";
			from.pushBack(varPop);
			from.printQueue();
			cout << endl;
		}

		system("pause");
		system("cls");
	}
	return true;
}



void main(void)
{
	setlocale(LC_ALL, "RUS");
	srand(time(nullptr));
	//---- int
	const int sizeInt = 4;
	int masInt[sizeInt] = { 100500, 1, 2, 3 };
	string masStr[sizeInt] = { "Director","VIP","Worker","Students" };
	queueList<int> queueInt(masInt, masStr, sizeInt);
	

	
	//queueList<int> queueInt(masInt, sizeInt);
	//queueList<int> queueInt1;

	//queueInt.queue(queueInt1);

	system("pause");
	return;
}
